<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="utf-8">
    <title>Scrollissimo</title>
    <script src="//yastatic.net/jquery/1.9.1/jquery.min.js"></script>

    <!--[if lt IE 9]>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/es5-shim/4.1.0/es5-shim.min.js"></script>
    <script type="text/javascript" src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link href="styles.css" rel="stylesheet">
</head>
<body class="b-page">
    <section id="screen1" class="screen screen_num_1">
        <h1 id="header" class="header">Scrollissimo</h1>
        <div class="turn" id="turn"></div>
    </section>
    <div class="indicator" id="indicator"></div>
<script src="scrollissimo/scrollissimo.js"></script>
<script>
    window.onload = function(){
        var screen1 = document.getElementById('screen1'),
            indicator = document.getElementById('indicator'),
            header = document.getElementById('header');

        //initialize Scrollissimo
        Scrollissimo(function(){
            this.add([
                {
                    target: header,
                    property: 'font-size',
                    from: 0,
                    to: 150,
                    suffix: 'px',
                    start: '0',
                    duration: '5%'
                },
                {
                    target: header,
                    property: 'text-shadow',
                    from: 0,
                    to: 18,
                    prefix: '0 0 ',
                    suffix: 'px rgba(0,0,0,.35)',
                    start: '0',
                    duration: '5%'
                },
                {
                    target: header,
                    property: 'text-shadow',
                    from: 0,
                    to: 18,
                    prefix: '0 0 ',
                    suffix: 'px rgba(0,0,0,.5)',
                    start: '0',
                    duration: '5%'
                },
                {
                    target: header,
                    property: 'top',
                    from: 50,
                    to: 20,
                    suffix: '%',
                    start: '0',
                    duration: '10%'
                },
                {
                    target: header,
                    property: 'font-size',
                    from: 150,
                    to: 50,
                    suffix: 'px',
                    start: '5%',
                    duration: '10%'
                },
                {
                    target: header,
                    property: 'text-shadow',
                    from: 18,
                    to: 0,
                    prefix: '0 0 ',
                    suffix: 'px rgba(0,0,0,.25)',
                    start: '5%',
                    duration: '10%'
                },
                {
                    target: header,
                    func: function(progress){
                        var blur = ((1-progress) * 3).toFixed(2);
                        blurissimo(this, blur);
                    },
                    start: '0',
                    duration: '10%'
                }
            ], 0.001);

            //create new queue with animation of scroll indicator
            this.add({
                target: indicator,
                property: 'width', //animate width
                prefix: '',
                from: 0, //from 0...
                to: 100, //...to 100...
                suffix: '%', //...percents
                start: '0', //start at the beginning of page
                duration: '100%' //finish at the end of page
            });
        });
    };

    (function(w){
        var ie = (!!document.all);
        w.blurissimo = function(target, strength){
            if(typeof target.style.filter !== 'undefined'){
                if(ie && !window.atob){
                    target.style.filter = 'progid:DXImageTransform.Microsoft.Blur(PixelRadius=\'' + strength * 10 + '\')';
                }else{
                    target.style.filter = 'blur(' + strength + 'px)';
                }
            }
            if(typeof target.style.webkitFilter !== 'undefined'){
                target.style.webkitFilter = 'blur(' + strength + 'px)';
            }
        }
    })(this);
</script>
</body>
</html>