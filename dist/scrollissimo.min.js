!function(t,e,r){function s(t,e){if("object"==typeof t&&t.target){var s={};return s.property=t.property,s.from=t.from||0,s.to=t.to||0,s.prefix=t.prefix||"",s.suffix=t.suffix||"",s.duration=a._toPercents(t.duration)||0,s.target=t.target.jquery?t.target:r(t.target),t.start?"-"===t.start.substr(0,1)||"+"===t.start.substr(0,1)?(s.offset=t.start,s.start=e.end):s.start=a._toPercents(t.start):s.start=e.end||0,console.log(s.start,s.offset,s.duration),s.offset=a._toPercents(t.offset||s.offset)||0,s.start+=s.offset,s.queue=e,{animator:null,target:s.target,sourceParams:t,params:s,render:i.bind(this,s.start,s.duration,(t.func||function(t){this.css(s.property,s.prefix+(s.from+(s.to-s.from)*t)+s.suffix)}).bind(s.target)),recalc:function(t){t=t||r(document).height(),this.params.duration=a._toPercents(this.sourceParams.duration||"",t),"undefined"==typeof this.sourceParams.start&&(this.params.start=a._toPercents(this.sourceParams.start,t))},getIntersection:function(t,e){return a._getIntersection(this.params.start,this.params.start+this.params.duration,t,e)}}}}function i(t,e,r,s){var i=(s-t)/e;0>=i&&(i=0),i>=1&&(i=1),r(i)}var o,n,a={},u=0,h=[],c=[],f=r(t),m=r(e);!function(){var e,r=["ms","moz","webkit","o"],s=r.length;if(t.requestAnimationFrame)t._rAF=t.requestAnimationFrame;else{for(e=0;s>e&&!t.requestAnimationFrame;e+=1)t._rAF=t[r[e]+"RequestAnimationFrame"]&&t[r[e]+"RequestAnimationFrame"];!t._rAF&&(t._rAF=function(e){return t.setTimeout(function(){e()},1e3/60)})}}(),a._getIntersection=function(t,e,r,s){var i,o,n=Math.min(r,s),a=Math.max(r,s),u=t,h=e;if(u>=n&&a>=u)i=u,o=Math.min(a,h);else if(a>=h&&h>=n)i=Math.max(n,u),o=Math.min(a,h);else{if(!(n>=u&&h>=a))return;i=n,o=a}return s>r?{from:i,to:o}:{from:o,to:i}},a._toPercents=function(t,e){return e=e||n||m.height(),"string"==typeof t?"%"===t.substr(-1,1)?parseFloat(t)/100:"px"===t.substr(-2,2)?parseFloat(t)/e:parseFloat(t)/e:isNaN(t)?void 0:t/e},function(e){e.Queue=function(t){this.start=0,this.end=0,!isNaN(t)&&(this.smoother=new e.Queue.Smoother(this,.001*t))},e.Queue.prototype=Array.prototype.slice.call(Array.prototype),e.Queue.prototype.add=function(t){if(!(t instanceof Array)){if("object"!=typeof t)return;t=[t]}return t.forEach(function(t){var e=s(t,this);e&&(this.push(e),this.end<e.params.start+e.params.duration&&(this.end=e.params.start+e.params.duration))}.bind(this)),this.start=this[0]&&this[0].params.start||0,this},e.Queue.prototype.getIntersection=function(t,r){return e._getIntersection(this.start,this.end,t,r)},e.Queue.Smoother=function(t,e){this.status="idle",this.animateFrom=0,this.animateTo=0,this.maxSpeed=+e,this.queue=t},e.Queue.Smoother.prototype.render=function(t,e){this.queue.forEach(function(r){var s=r.getIntersection(t,e);s&&r.render(s.to)})},e.Queue.Smoother.prototype.step=function(){var e=this.animateTo-this.animateFrom;Math.abs(e)>this.maxSpeed?(this.render(this.animateFrom,this.animateFrom+=this.maxSpeed*(e>0?1:-1)),t._rAF(this.step.bind(this))):(this.render(this.animateFrom,this.animateTo),this.status="idle",this.animateFrom=this.animateTo)},e.Queue.Smoother.prototype.smooth=function(e,r){var s=this.queue.getIntersection(e,r);return s?(this.animateTo=s.to,"idle"===this.status&&(this.status="busy",t._rAF(this.step.bind(this))),this.id=t._rAF(this.step.bind(this)),this):void 0}}(a),a._render=function(t){c.forEach(function(e){e.forEach(function(e){e.render(t)})}),h.forEach(function(e){e.smoother.smooth(a.lastProgress,t)}),a.lastProgress=t}.bind(a),a.lastProgress=0,a._catch=function(t){var e=isNaN(t)?m.scrollTop():t,r=e/(n-o);this._render(r),u=e},a.add=function(t,e){var r;return t=t||[],r=new this.Queue(e).add(t),(e?h:c).push(r),r}.bind(a),a.knock=function(t){this._catch(t),isNaN(t)&&setTimeout(this._catch.bind(this),100)},f.resize(function(){o=f.height(),n=m.height(),c.forEach(function(t){t.forEach(function(t){t.recalc(n)})}),h.forEach(function(t){t.forEach(function(t){t.recalc(n)})})}),a.isTouchMode="ontouchstart"in t,m.ready(function(){n=m.height(),o=f.height()}),t.Scrollissimo=a}(window,document,jQuery);