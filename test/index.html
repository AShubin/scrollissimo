<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="utf-8">
    <title>Scrollissimo</title>
    <script src="//yastatic.net/jquery/2.1.3/jquery.min.js"></script>

    <!--[if lt IE 9]>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/es5-shim/4.1.0/es5-shim.min.js"></script>
    <script type="text/javascript" src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link href="../node_modules/qunitjs/qunit/qunit.css" rel="stylesheet">
</head>
<body class="b-page">
    <div id="qunit"></div>
    <div id="qunit-fixture"></div>

    <script src="../lib/scrollissimo.js"></script>
    <script src="../lib/scrollissimo.touch.js"></script>
    <script src="../node_modules/qunitjs/qunit/qunit.js"></script>
    <script>
        var testQueue = new Scrollissimo.Queue();

        QUnit.test( 'Queues', function(assert){
            assert.ok( testQueue instanceof Array, 'Initialisation' );

            assert.ok( typeof testQueue.add() === 'undefined', 'Empty animation param' );

            assert.ok( testQueue.add({
                from: 0,
                to: 0,
                start: 0,
                duraation: 0
            }).length === 0, 'Wrong target' );

            assert.ok( testQueue.add({
                target: $('#qunit'),
                from: 0,
                to: 0,
                start: 0,
                duraation: 0
            }).length === 1, 'Single animation' );
        });

        QUnit.test( 'Intersections', function(assert){
            var intersection;

            assert.ok( Scrollissimo._getIntersection(5, 6, 7, 8) === undefined, 'Partial intersection #1' );

            assert.ok( Scrollissimo._getIntersection(5, 6, 3, 4) === undefined, 'Partial intersection #2' );

            intersection = Scrollissimo._getIntersection(0, 0, 0, 0);
            assert.ok( intersection.from === 0 && intersection.to === 0, 'Zero intersection' );

            intersection = Scrollissimo._getIntersection(5, 7, 6, 8);
            assert.ok( intersection.from === 6 && intersection.to === 7, 'Total intersection #1' );

            intersection = Scrollissimo._getIntersection(6, 8, 5, 7);
            assert.ok( intersection.from === 6 && intersection.to === 7, 'Total intersection #2' );

            intersection = Scrollissimo._getIntersection(5, 8, 6, 7);
            assert.ok( intersection.from === 6 && intersection.to === 7, 'Total intersection #3' );

            intersection = Scrollissimo._getIntersection(6, 7, 5, 8);
            assert.ok( intersection.from === 6 && intersection.to === 7, 'Total intersection #4' );

            intersection = Scrollissimo._getIntersection(6, 7, 6, 7);
            assert.ok( intersection.from === 6 && intersection.to === 7, 'Identical intersection' );

            intersection = Scrollissimo._getIntersection(5, 5, 5, 5);
            assert.ok( intersection.from === 5 && intersection.to === 5, 'Null size intersection' );
        });

        QUnit.test( 'PercentPixel', function(assert){
            assert.ok( !isNaN(Scrollissimo._toPercents('1000px')), '\'1000px\'' );
            assert.ok( !isNaN(Scrollissimo._toPercents('1000')), '\'1000\'' );
            assert.ok( !isNaN(Scrollissimo._toPercents(1000)), '1000' );
            assert.ok( !isNaN(Scrollissimo._toPercents('100%')) && Scrollissimo._toPercents('100%') === 1, '\'100%\'' );
        });

        window._rAF(function(time){
            QUnit.test( 'requestAnimationFrame', function( assert ) {
                assert.ok( time > 0, 'OK' );
            });
        });

    </script>
</body>
</html>